var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PageBase=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this),this.onStageResize()},e.prototype.initTurnPage=function(t){void 0===t&&(t=null),this.touchMoveTurnPage=new TouchMoveTurnPage(t),this.touchMoveTurnPage.addEventListener(GameEvent.PAGE_PREV,this.onPagePrev,this),this.touchMoveTurnPage.addEventListener(GameEvent.PAGE_NEXT,this.onPageNext,this)},e.prototype.pauseTurnPage=function(){this.touchMoveTurnPage.removeEventListener(GameEvent.PAGE_PREV,this.onPagePrev,this),this.touchMoveTurnPage.removeEventListener(GameEvent.PAGE_NEXT,this.onPageNext,this)},e.prototype.reStartTurnPage=function(){this.touchMoveTurnPage.addEventListener(GameEvent.PAGE_PREV,this.onPagePrev,this),this.touchMoveTurnPage.addEventListener(GameEvent.PAGE_NEXT,this.onPageNext,this)},e.prototype.startTurnPage=function(){this.touchMoveTurnPage&&this.touchMoveTurnPage.stopListener(),this.touchMoveTurnPage.startListener()},e.prototype.stopTurnPage=function(){this.touchMoveTurnPage&&this.touchMoveTurnPage.stopListener()},e.prototype.onPagePrev=function(){this.onTurnPrevPage()&&(this.clearAllListener(),this.dispatchEvent(new GameEvent(GameEvent.PREV_STEP)))},e.prototype.onPageNext=function(){this.onTurnNextPage()&&(this.clearAllListener(),this.dispatchEvent(new GameEvent(GameEvent.NEXT_STEP)))},e.prototype.onTurnNextPage=function(){return!0},e.prototype.onTurnPrevPage=function(){return!0},e.prototype.onShowNavArrow=function(){return!0},e.prototype.pageInComplete=function(){},e.prototype.showPageNavArrow=function(){this.stage.dispatchEvent(new GameEvent(GameEvent.PAGE_NAV_ARROW_SHOW))},e.prototype.hidePageNavArrow=function(){this.stage.dispatchEvent(new GameEvent(GameEvent.PAGE_NAV_ARROW_HIDE))},e.prototype.changePageNavArrow=function(t){var e=new GameEvent(GameEvent.PAGE_NAV_ARROW_CHANGE);e.data=t,this.stage.dispatchEvent(e)},e.prototype.clearAllListener=function(){this.stopTurnPage(),this.stage&&this.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.onStageResize=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight,i=Math.max(t/GameData.DESIGN_PORTRAIT_WIDTH,e/GameData.DESIGN_PORTRAIT_HEIGHT),n=(t-GameData.DESIGN_PORTRAIT_WIDTH*i)/2,o=(e-GameData.DESIGN_PORTRAIT_HEIGHT*i)/2;this.bg&&(this.bg.x=n,this.bg.y=o,this.bg.scaleX=i,this.bg.scaleY=i),this.contentGroup&&(this.contentGroup.x=(t-GameData.DESIGN_PORTRAIT_WIDTH)/2,this.contentGroup.y=(e-GameData.DESIGN_PORTRAIT_HEIGHT)/2)},e}(eui.Component);__reflect(PageBase.prototype,"PageBase");var starlingswf;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getTextField=function(t){return this.getChildByName(t)},e.prototype.getMovie=function(t){return this.getChildByName(t)},e.prototype.getSprite=function(t){return this.getChildByName(t)},e.prototype.getImage=function(t){return this.getChildByName(t)},e}(egret.DisplayObjectContainer);t.SwfSprite=e,__reflect(e.prototype,"starlingswf.SwfSprite")}(starlingswf||(starlingswf={}));var Parallax=function(){function t(t){this.MAGIC_NUMBER=30,this.relativeInput=!1,this.clipRelativeInput=!1,this.calibrationThreshold=100,this.calibrationDelay=500,this.supportDelay=500,this.calibrateX=!1,this.calibrateY=!0,this.invertX=!0,this.invertY=!0,this.limitX=!1,this.limitY=!1,this.scalarX=10,this.scalarY=10,this.frictionX=.05,this.frictionY=.05,this.originX=.5,this.originY=.5,this.ix=0,this.iy=0,this.mx=0,this.my=0,this.vx=0,this.vy=0,this.cx=0,this.cy=0,this.ex=0,this.ey=0,this.ew=0,this.eh=0,this.erx=0,this.ery=0,this.ecx=0,this.ecy=0,this.portrait=!0,this.layers=[],this.depths=[],this.oldPoints=[],this.isAuto=!1,this.deviceBetaInit=20,this.parallaxObjects=t,this.stage=egret.MainContext.instance.stage,this.init()}return t.prototype.init=function(){this.orientation=new egret.DeviceOrientation,this.orientation.addEventListener(egret.Event.CHANGE,this.onDeviceOrientation,this),this.enterFrameTimer=new egret.Timer(30),this.enterFrameTimer.addEventListener(egret.TimerEvent.TIMER,this.onAnimationFrame,this)},t.prototype.start=function(){this.enterFrameTimer.start(),this.orientation.start()},t.prototype.stop=function(){this.enterFrameTimer.stop(),this.orientation.stop()},t.prototype.clearEventListener=function(){this.stop(),this.enterFrameTimer.removeEventListener(egret.Event.ENTER_FRAME,this.onAnimationFrame,this),this.orientation.removeEventListener(egret.Event.CHANGE,this.onDeviceOrientation,this)},t.prototype.onDeviceOrientation1=function(t){var e=(t.beta||0)/this.MAGIC_NUMBER,i=(t.gamma||0)/this.MAGIC_NUMBER;this.ix=e,this.iy=i},t.prototype.onDeviceOrientation=function(t){var e=((t.beta||0)-32)/this.MAGIC_NUMBER,i=(t.gamma||0)/this.MAGIC_NUMBER;this.ix=e,this.iy=i},t.prototype.onAnimationFrame1=function(){for(var t=.1,e=0;e<this.parallaxObjects.length;e++){var i=this.parallaxObjects[e];if(i.xMove){var n=(i.endX-i.obj.x)*t;i.obj.x+=n,i.obj.x<i.minX?i.obj.x=i.minX:i.obj.x>i.maxX&&(i.obj.x=i.maxX)}if(i.yMove){var o=(i.endY-i.obj.y)*t;i.obj.y+=o,i.obj.y<i.minY?i.obj.y=i.minY:i.obj.y>i.maxY&&(i.obj.y=i.maxY)}}},t.prototype.onAnimationFrame=function(){Utils.isPortrait?(this.mx=this.iy,this.my=this.ix):(this.mx=this.ix,this.my=this.iy),this.ew=this.stage.stageWidth,this.eh=this.stage.stageHeight,this.mx*=this.ew*(this.scalarX/100),this.my*=this.eh*(this.scalarY/100),this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY;for(var t=0;t<this.parallaxObjects.length;t++){var e=this.parallaxObjects[t];e.endX=e.initX+this.vx*e.depth*(this.invertX?-1:1),e.endY=e.initY+this.vy*e.depth*(this.invertY?-1:1)}this.onAnimationFrame1()},t.prototype.clamp=function(t,e,i){return t=Math.max(t,e),t=Math.min(t,i)},t}();__reflect(Parallax.prototype,"Parallax");var RandomMove=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.accel=10,this.slow=1.175,this.i=2,this.r=10,this.signal=1,this.speedx=0,this.speedy=0,this.speed=400,this.mh=0,this.mv=0,this.step=0,this.displayObject=t,this.oldx=this.displayObject.x,this.oldy=this.displayObject.y,this.xMove=e,this.yMove=i,this.r=5*Math.random()+5}return t.prototype.startRun=function(){this.displayObject.removeEventListener(egret.Event.ENTER_FRAME,this.onLoop,this),this.displayObject.addEventListener(egret.Event.ENTER_FRAME,this.onLoop,this)},t.prototype.stopRun=function(){this.displayObject.removeEventListener(egret.Event.ENTER_FRAME,this.onLoop,this)},t.prototype.onLoop=function(){this.i+=10*Math.random(),this.speed<this.i&&(this.i=0);var t=this.i/this.speed,e=2*t*Math.PI,i=this.r*Math.sin(e),n=this.r*Math.cos(e);if(this.xMove){var o=.2*(this.oldx+i-this.displayObject.x);this.displayObject.x+=o}if(this.yMove){var s=.2*(this.oldy+n-this.displayObject.y);this.displayObject.y+=s}},t.prototype.onLoop1=function(t){if(1==this.signal){var e=this.mh,i=this.mv,n=this.displayObject.x,o=this.displayObject.y,s=Math.sqrt((e-n)*(e-n)+(i-o)*(i-o)),r=s>50?1:50-s,a=i-o,h=e-n,c=Math.atan2(a,h)/Math.PI*180,l=-1*(r-50);this.i+=10,this.speed<this.i&&(this.i=0);var p=this.i/this.speed,u=2*p*Math.PI,d=e+this.r*Math.sin(u),g=i+this.r*Math.cos(u);c=n>e?-1*r:1*r,l>0?(this.speedx=(this.speedx+(c/50*Math.cos(e)*d-n)/this.accel)/this.slow,this.speedy=(this.speedy+(c/50*Math.sin(i)*g-o)/this.accel)/this.slow):(this.speedx=(this.speedx+(this.oldx*Math.sin(r)-n)/this.accel)/this.slow,this.speedy=(this.speedy+(this.oldy*Math.cos(r)-o)/this.accel)/this.slow),this.xMove&&(this.displayObject.x=n+this.speedx),this.yMove&&(this.displayObject.y=o+this.speedy)}},t}();__reflect(RandomMove.prototype,"RandomMove");var RandomShake=function(t){function e(e,i){var n=t.call(this)||this;return n.curDist=0,n.curDir=1,n.displayObjects=e,n.maxDist=i,n.init(),n}return __extends(e,t),e.prototype.start=function(){for(var t=0;t<this.displayObjects.length;t++)this.randomMoves[t].startRun();this.loopTimer.start()},e.prototype.stop=function(){for(var t=0;t<this.displayObjects.length;t++)this.randomMoves[t].stopRun();this.loopTimer.stop()},e.prototype.init=function(){this.randomMoves=[];for(var t=0;t<this.displayObjects.length;t++){var e=new RandomMove(this.displayObjects[t],!1,!0);this.randomMoves[t]=e}this.loopTimer=new egret.Timer(30),this.loopTimer.addEventListener(egret.TimerEvent.TIMER,this.onLoopTimer,this)},e.prototype.onLoopTimer=function(t){this.curDist+=(30*Math.random()+10)*this.curDir,this.curDist>this.maxDist?this.curDir=-1:this.curDist<-this.maxDist&&(this.curDir=1);for(var e=0;e<this.displayObjects.length;e++)this.randomMoves[e].mh=this.curDist,this.randomMoves[e].mv=this.curDist+500},e}(egret.EventDispatcher);__reflect(RandomShake.prototype,"RandomShake");var GameEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e}(egret.Event);GameEvent.NEXT_STEP="next_step",GameEvent.PREV_STEP="prev_step",GameEvent.MY_PRIZE="my_prize",GameEvent.NEXT_LEVEL="next_level",GameEvent.PREV_LEVEL="prev_level",GameEvent.LEVEL_OPEN_COMPLETE="level_open_complete",GameEvent.MY_PRIZE_REFRESH="my_prize_refresh",GameEvent.SHOW_SHARE="show_share",GameEvent.SHOW_SHOP="show_shop",GameEvent.GO_HOME="go_home",GameEvent.DRAW_LOTTERY="draw_lottery",GameEvent.SHOW_WEIXIN_SUBSCRIBE="show_weixin_subscibe",GameEvent.SHOW_RANKING="show_ranking",GameEvent.STAGE_DRAG_ON="stage_drag_on",GameEvent.STAGE_DRAG_OFF="stage_drag_off",GameEvent.SOUND_BG_PLAY="sound_bg_play",GameEvent.SOUND_BG_STOP="sound_bg_stop",GameEvent.SOUND_SHOW="sound_show",GameEvent.SOUND_HIDE="sound_hide",GameEvent.SOUND_EFFECT_PLAY="sound_effect_play",GameEvent.SOUND_EFFECT_STOP="sound_effect_stop",GameEvent.PAGE_NEXT="page_next",GameEvent.PAGE_PREV="page_prev",GameEvent.PAGE_LEFT="page_left",GameEvent.PAGE_RIGHT="page_right",GameEvent.GO_MY="go_my",GameEvent.ORIENTATION_MODE="Orientation_Mode",GameEvent.GUESS_TRUE="guess_true",GameEvent.GUESS_FALSE="guess_false",GameEvent.PAGE_NAV_ARROW_SHOW="page_nav_arrow_show",GameEvent.PAGE_NAV_ARROW_HIDE="page_nav_arrow_hide",GameEvent.PAGE_NAV_ARROW_CHANGE="page_nav_arrow_change",GameEvent.PAGE_TURN_ENABLED="page_turn_enabled",GameEvent.PAGE_TURN_DISENABLED="page_turn_disenabled",GameEvent.SHOW_LOGO_AND_SOUND="show_logo_and_sound",GameEvent.HIDE_LOGO_AND_SOUND="hide_logo_and_sound",GameEvent.MESSAGE_SHOW="messge_show",GameEvent.MESSAGE_HIDE="message_hide",GameEvent.SHOW_GUAN_ZHU="show_guan_zhu",GameEvent.GAME_SUCCESS="game_success",GameEvent.GAME_FAIL="game_fail",GameEvent.CHANGE_LOGO_BLACK="change_logo_black",GameEvent.CHANGE_LOGO_WHITE="change_logo_white",GameEvent.LOGO_SHOW_IMAGE="logo_show_image",GameEvent.LOGO_HIDE_IMAGE="logo_hide_image",GameEvent.LOGO_2_SHOW="logo_2_show",GameEvent.LOGO_2_HIDE="logo_2_hide",GameEvent.SHOW_SHIJIA="show_shijia",GameEvent.SHOW_LIVE_VIDEO="show_live_video",GameEvent.HIDE_LIVE_VIDEO="hide_live_video",__reflect(GameEvent.prototype,"GameEvent");var GameOrientation=function(t){function e(){var e=t.call(this)||this;return e.deviceX=0,e.deviceY=0,e.deviceFixY=0,e.deviceBetaInit=20,e.beginPoint=new egret.Point,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.orientation=new egret.DeviceOrientation,this.orientation.addEventListener(egret.Event.CHANGE,this.onDeviceOrientation,this)},e.prototype.start=function(){this.orientation.start()},e.prototype.stop=function(){this.orientation.stop()},e.prototype.onDeviceOrientation=function(t){var e=(t.beta||0)/180,i=(t.gamma||0)/90,n=30,o=(this.deviceBetaInit-n,this.deviceBetaInit+n,0);Utils.isPortrait?(this.deviceX=i,o=(t.beta-this.deviceBetaInit)/n,o>1?o=1:-1>o&&(o=-1),this.deviceY=o):(this.deviceX=e,o=(t.gamma-this.deviceBetaInit)/n,o>1?o=1:-1>o&&(o=-1),this.deviceY=i);var s=new GameOrientationEvent(GameOrientationEvent.CHANGE);s.deviceX=this.deviceX,s.deviceY=this.deviceY,this.dispatchEvent(s)},e}(egret.EventDispatcher);__reflect(GameOrientation.prototype,"GameOrientation");var GameOrientationEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e}(egret.Event);GameOrientationEvent.CHANGE="change",__reflect(GameOrientationEvent.prototype,"GameOrientationEvent");var TouchDrag=function(t){function e(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var o=t.call(this)||this;return o.dragObjBeginPoint=new egret.Point,o.beginPoint=new egret.Point,o.dragDisplayObject=e,o.dragX=i,o.dragY=n,o.init(),o}return __extends(e,t),e.prototype.init=function(){this.stage=egret.MainContext.instance.stage},e.prototype.startDrag=function(){this.stopDrag(),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.stopDrag=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchBegin=function(t){this.beginPoint.x=t.stageX,this.beginPoint.y=t.stageY,this.dragObjBeginPoint.x=this.dragDisplayObject.x,this.dragDisplayObject.y=this.dragDisplayObject.y,this.touchPointID=t.touchPointID},e.prototype.onTouchMove=function(t){if(this.touchPointID==t.touchPointID){var e=t.stageX-this.beginPoint.x,i=t.stageY-this.beginPoint.y;if(this.dragX){this.dragDisplayObject.x=this.dragObjBeginPoint.x+e;var n=this.stage.stageWidth-this.dragDisplayObject.width,o=0;this.dragDisplayObject.x<n?this.dragDisplayObject.x=n:this.dragDisplayObject.x>o&&(this.dragDisplayObject.x=o)}if(this.dragY){this.dragDisplayObject.y=this.dragObjBeginPoint.y+i;var s=this.stage.stageHeight-this.dragDisplayObject.height,r=0;this.dragDisplayObject.y<s?this.dragDisplayObject.y=n:this.dragDisplayObject.y>r&&(this.dragDisplayObject.y=r)}}},e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){},e}(egret.EventDispatcher);__reflect(TouchDrag.prototype,"TouchDrag");var TouchDragEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e}(egret.Event);TouchDragEvent.START_DRAG="start_drag",TouchDragEvent.STOP_DRAG="stop_drag",__reflect(TouchDragEvent.prototype,"TouchDragEvent");var TouchTapNoMove=function(t){function e(e,i){var n=t.call(this)||this;return n.beginPoint=new egret.Point,n.dragDisplayObject=e,n.tapCallBack=i,n.init(),n}return __extends(e,t),e.prototype.init=function(){this.startEvent()},e.prototype.startEvent=function(){this.stopEvent(),this.dragDisplayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.dragDisplayObject.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.stopEvent=function(){this.dragDisplayObject.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.dragDisplayObject.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchBegin=function(t){this.beginPoint.x=t.stageX,this.beginPoint.y=t.stageY,this.touchPointID=t.touchPointID},e.prototype.onTouchEnd=function(t){var e=t.stageX-this.beginPoint.x,i=t.stageY-this.beginPoint.y;Math.abs(e)<10&&Math.abs(i)<10&&this.tapCallBack&&this.tapCallBack()},e}(egret.EventDispatcher);__reflect(TouchTapNoMove.prototype,"TouchTapNoMove");var TouchTapNoMoveEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e}(egret.Event);TouchTapNoMoveEvent.TAP_NO_MOVE="tap_no_move",__reflect(TouchTapNoMoveEvent.prototype,"TouchTapNoMoveEvent");var GameData=function(){function t(){}return t.initAPI=function(){},t}();GameData.debugServerTime=!1,GameData.baseURL="https://h5.xingyuanauto.com/Dongbiao/DbVista/",GameData.wxJssdkURL="https://fld.xingyuanauto.com/public/index.php/port/Aes/wx_token",GameData.wxShareTitle="购车访谈 奇葩痛点够我笑半天",GameData.WxShareDesc="GO！X008 SUV盛会 “惠”有大动作!",GameData.WxShareImg=GameData.baseURL+"resource/res/share/share.jpg",GameData.WxShareLink=GameData.baseURL+"index.html",GameData.isGameOver=!1,GameData.saveInfoURL="php/saveinfo.php",GameData.userLotterURL="https://fld.xingyuanauto.com/public/index.php/port/Userdbvistalotter/UserLotter",GameData.getKeyURL="https://fld.xingyuanauto.com/public/index.php/port/Aes/GetEncrypt",GameData.answers=[],GameData.key="",GameData.carTypes=[{name:"4008",id:"61"},{name:"3008",id:"62"},{name:"2008",id:"63"}],GameData.DESIGN_PORTRAIT_WIDTH=640,GameData.DESIGN_PORTRAIT_HEIGHT=1039,GameData.DESIGN_LANDSCAPE_WIDTH=1136,GameData.DESIGN_LANDSCAPE_HEIGHT=535,__reflect(GameData.prototype,"GameData");var Logo=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.init()},e.prototype.init=function(){this.touchChildren=!1,this.touchEnabled=!1,this.stage.addEventListener(GameEvent.CHANGE_LOGO_BLACK,this.onChangeBlack,this),this.stage.addEventListener(GameEvent.CHANGE_LOGO_WHITE,this.onChangeWhite,this)},e.prototype.onChangeBlack=function(){this.logoImg.source="home_logo"},e.prototype.onChangeWhite=function(){this.logoImg.source="home_logo_2"},e}(eui.Component);__reflect(Logo.prototype,"Logo");var Logo2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.init(),this.stage.addEventListener(GameEvent.LOGO_2_HIDE,this.hide,this),this.stage.addEventListener(GameEvent.LOGO_2_SHOW,this.show,this)},e.prototype.init=function(){},e.prototype.show=function(){this.visible=!0,egret.Tween.removeTweens(this),egret.Tween.get(this).to({alpha:1},500).call(function(){this.touchEnabled=!0,this.touchChildren=!0},this)},e.prototype.hide=function(){this.touchEnabled=!1,this.touchChildren=!1,egret.Tween.removeTweens(this),egret.Tween.get(this).to({alpha:0},500).set({visible:!1})},e}(eui.Component);__reflect(Logo2.prototype,"Logo2");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTestLoading=!1,e.isLoadingLoadEnd=!1,e.curPageName="",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),egret.Capabilities.isMobile?(window.addEventListener("resize",this.onStageResize.bind(this)),this.onStageResize()):this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,this.uiLayer=new eui.UILayer,this.addChild(this.uiLayer),this.stage.addEventListener(GameEvent.SHOW_LOGO_AND_SOUND,this.showLogoAndSound,this),this.stage.addEventListener(GameEvent.HIDE_LOGO_AND_SOUND,this.hideLogoAndSound,this),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),GameData.initAPI(),this.initWx(),this.initMeiTuan(),this.loadKey()},e.prototype.initWx=function(){var t=new window.answerjs.WxShare;t.title=GameData.wxShareTitle,t.desc=GameData.WxShareDesc,t.link=GameData.WxShareLink,t.imgUrl=GameData.WxShareImg+"?v=1",t.init(GameData.wxJssdkURL)},e.prototype.initMeiTuan=function(){var t={channel:"385",content:GameData.WxShareDesc,href:GameData.WxShareLink,imageURL:GameData.WxShareImg,title:GameData.wxShareTitle,success:function(t){}};window.initMeiTuanShare&&window.initMeiTuanShare(t)},e.prototype.onStageResize=function(){var t=(Utils.jqueryWindowWidth,Utils.jqueryWindowHeight,Utils.isPortrait);t?this.changeStageSize(t):(this.stage.orientation=egret.OrientationMode.AUTO,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,this.stage.setContentSize(GameData.DESIGN_PORTRAIT_WIDTH,GameData.DESIGN_PORTRAIT_HEIGHT)),this.changeSoundPanelPos()},e.prototype.changeStageSize=function(t){var e=Utils.jqueryWindowWidth,i=Utils.jqueryWindowHeight;if(t){var n=GameData.DESIGN_PORTRAIT_WIDTH,o=GameData.DESIGN_PORTRAIT_HEIGHT;this.stage.orientation=egret.OrientationMode.AUTO,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL}else n=GameData.DESIGN_LANDSCAPE_WIDTH,o=GameData.DESIGN_LANDSCAPE_HEIGHT,this.stage.orientation=egret.OrientationMode.AUTO,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL;var s=Math.max(n/e,o/i),r=Math.floor(e*s),a=Math.floor(i*s);this.stage.setContentSize(r,a)},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("loading",3),RES.loadGroup("preload",2)},e.prototype.onResourceLoadComplete=function(t){"loading"==t.groupName&&(this.isLoadingLoadEnd=!0,this.showLoading()),"preload"==t.groupName&&this.isLoadingLoadEnd&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.isTestLoading||this.loadingUI.isUseLoadingCompleteEvent||this.startCreateScene())},e.prototype.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingUI&&this.loadingUI.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.showLoading=function(){this.stage.dirtyRegionPolicy=egret.DirtyRegionPolicy.OFF,this.loadingUI=new LoadingUI,this.loadingUI.name="loading",this.loadingUI.skinName="resource/page_skins/LoadingUISkin.exml",this.uiLayer.addChild(this.loadingUI),this.curPage=this.loadingUI,this.loadingUI.addEventListener(egret.Event.COMPLETE,this.onLoadingComplete,this)},e.prototype.onLoadingComplete=function(){this.startCreateScene()},e.prototype.removeLoading=function(){this.loadingUI.clearAllListener(),this.uiLayer.removeChild(this.loadingUI),this.loadingUI=null},e.prototype.startCreateScene=function(){GameData.dealerData=RES.getRes("peugeot_dealer"),this.showHome(),this.showOtherPanel(),this.initPageNavArrow(),this.stage.dirtyRegionPolicy=egret.DirtyRegionPolicy.ON},e.prototype.showOtherPanel=function(){this.soundPanel=new SoundPanel,this.soundPanel.skinName="resource/page_skins/SoundPanelSkin.exml",this.addChild(this.soundPanel),this.logo=new Logo,this.logo.skinName="resource/page_skins/LogoSkin.exml",this.addChild(this.logo),this.changeSoundPanelPos()},e.prototype.changeSoundPanelPos=function(){this.soundPanel&&(this.soundPanel.x=this.stage.stageWidth-this.soundPanel.icon.width-10,this.soundPanel.y=10),this.logo&&(this.logo.width=this.stage.stageWidth,this.logo.y=0)},e.prototype.hideLogoAndSound=function(){this.soundPanel&&(this.soundPanel.visible=!1),this.logo&&(this.logo.visible=!1)},e.prototype.showLogoAndSound=function(){this.soundPanel&&(this.soundPanel.visible=!0,this.soundPanel.alpha=0,egret.Tween.get(this.soundPanel).to({alpha:1},300)),this.logo&&(this.logo.visible=!0,this.logo.alpha=0,egret.Tween.get(this.logo).to({alpha:1},300))},e.prototype.initPageNavArrow=function(){this.pageNavArrow=new PageNavArrow(14),this.pageNavArrow.skinName=Utils.getEUISkinName("PageNavArrow"),this.addChild(this.pageNavArrow)},e.prototype.showPageNavArrow=function(){this.stage.dispatchEvent(new GameEvent(GameEvent.PAGE_NAV_ARROW_SHOW))},e.prototype.hidePageNavArrow=function(){this.stage.dispatchEvent(new GameEvent(GameEvent.PAGE_NAV_ARROW_HIDE))},e.prototype.showShareSuccess=function(){GameData.isGameOver&&(GameData.isGameOver=!1)},e.prototype.showPage=function(t,e){void 0===e&&(e=null),this.curPageName=t,this.hidePageNavArrow();var i,n=egret.getDefinitionByName(t);i=null==e?new n:new n(e),i.skinName="resource/page_skins/"+t+"Skin.exml",this.uiLayer.addChild(i);var o=this.curPage;return i.alpha=0,egret.Tween.get(i).to({alpha:1},500).call(function(){this.showPageComplete(o)},this),egret.Tween.get(o).to({alpha:0},500),this.curPage=i,o.touchChildren=!1,o.touchEnabled=!1,this.curPage.touchChildren=!1,this.curPage.touchEnabled=!1,BaiDu.trackPageview("/"+t),i},e.prototype.showPageComplete=function(t){t.clearAllListener&&t.clearAllListener(),this.uiLayer.removeChild(t),this.curPage.onShowNavArrow()&&this.showPageNavArrow(),this.curPage.pageInComplete(),this.curPage.touchChildren=!0,this.curPage.touchEnabled=!0},e.prototype.changeLogo=function(t){this.logo&&("white"==t?this.logo.onChangeWhite():this.logo.onChangeBlack())},e.prototype.showHome=function(){var t=this.showPage("Home");t.addEventListener(GameEvent.NEXT_STEP,this.showPage1,this)},e.prototype.showPage1=function(){var t=this.showPage("Page1");t.addEventListener(GameEvent.NEXT_STEP,this.showPage2,this)},e.prototype.showPage2=function(){var t=this.showPage("Page2");t.addEventListener(GameEvent.NEXT_STEP,this.showPage3,this)},e.prototype.showPage3=function(){var t=this.showPage("Page3");t.addEventListener(GameEvent.NEXT_STEP,this.showHome,this)},e.prototype.loadKey=function(){var t=new egret.URLRequest;t.url=GameData.getKeyURL;var e=$.param({ran:Math.random()});t.data=new egret.URLVariables(e),t.method=egret.URLRequestMethod.POST;var i=new egret.URLLoader;i.addEventListener(egret.Event.COMPLETE,this.onLoadKeyComplete,this),i.load(t)},e.prototype.onLoadKeyComplete=function(t){var e=t.target;GameData.key=e.data},e}(eui.UILayer);__reflect(Main.prototype,"Main");var CarTypeList=function(t){function e(e){var i=t.call(this)||this;return i.carType=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this),this.provinceList=new eui.List,this.provinceList.width=this.provinceScroller.width,this.provinceScroller.viewport=this.provinceList,this.provinceScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.provinceList.addEventListener(egret.Event.CHANGE,this.onProviceChange,this),this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapOk,this),this.loadDealer(),this.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this),this.onStageResize()},e.prototype.loadDealer=function(){this.initDealerList(GameData.carTypes)},e.prototype.onLoadJsonpCoplete=function(t){this.initDealerList(t)},e.prototype.initDealerList=function(t){for(var e=new eui.ArrayCollection,i=-1,n=0;n<t.length;n++)e.addItem({label:t[n].name,value:n,id:t[n].id}),t[n].name==this.carType.name&&(i=n);this.provinceList.dataProvider=e,this.provinceList.selectedIndex=i},e.prototype.onProviceChange=function(t){},e.prototype.onTapOk=function(){this.onClose()},e.prototype.onClose=function(){this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.onCloseComplete()},this)},e.prototype.onCloseComplete=function(){this.clearAllListener();var t=new egret.Event(egret.Event.CLOSE),e={name:"",id:""};-1!=this.provinceList.selectedIndex&&(e.name=this.provinceList.selectedItem.label,e.id=this.provinceList.selectedItem.id),t.data=e,this.dispatchEvent(t),this.parent.removeChild(this)},e.prototype.clearAllListener=function(){this.stage&&this.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.onStageResize=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;this.bg.width=t,this.bg.height=e,this.groupPanel.x=(t-this.panelBg.width)/2,this.groupPanel.y=(e-this.panelBg.height)/2},e}(eui.Component);__reflect(CarTypeList.prototype,"CarTypeList");var CityList=function(t){function e(e,i){void 0===e&&(e=""),void 0===i&&(i="");var n=t.call(this)||this;return n.curCity=i,n.curProvince=e,n}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose1,this)},this),this.provinceList=new eui.List,this.provinceList.width=this.provinceScroller.width,this.provinceScroller.viewport=this.provinceList,this.provinceScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.provinceList.itemRendererSkinName="resource/eui_skins/ItemRendererSkin.exml?v=1001",this.cityList=new eui.List,this.cityList.width=this.cityScroller.width,this.cityScroller.viewport=this.cityList,this.cityScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.cityList.itemRendererSkinName="resource/eui_skins/ItemRendererSkin.exml?v=1001",this.provinceList.addEventListener(egret.Event.CHANGE,this.onProviceChange,this),this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapOk,this),this.provinceScroller.addEventListener(egret.Event.CHANGE,this.onScrollerChange,this),this.initProvinceList(),this.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this),this.onStageResize()},e.prototype.onScrollerChange=function(t){},e.prototype.initProvinceList=function(){for(var t=new eui.ArrayCollection,e=-1,i=0;i<GameData.dealerData.length;i++)t.addItem({label:GameData.dealerData[i].dealer_name,value:i,id:GameData.dealerData[i].dealer_id}),GameData.dealerData[i].dealer_name==this.curProvince&&(e=i);this.provinceList.dataProvider=t,this.provinceList.selectedIndex=e,this.loadCities()},e.prototype.onProviceChange=function(t){this.cityList.selectedIndex=-1,this.loadCities()},e.prototype.loadCities=function(){-1!=this.provinceList.selectedIndex&&(this.cityList.visible=!1,this.initCityList(GameData.dealerData[this.provinceList.selectedItem.value].city))},e.prototype.initCityList=function(t){for(var e=new eui.ArrayCollection,i=-1,n=0;n<t.length;n++)e.addItem({label:t[n].dealer_name,value:n,id:t[n].dealer_id,pid:t[n].pid}),t[n].dealer_name==this.curCity&&(i=n);this.cityList.dataProvider=e,-1!=i&&(this.cityList.selectedIndex=i),this.curCity="",this.cityList.visible=!0},e.prototype.onTapOk=function(){this.onClose()},e.prototype.onClose1=function(){this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.parent.removeChild(this)},this)},e.prototype.onClose=function(){this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.onCloseComplete()},this)},e.prototype.onCloseComplete=function(){this.clearAllListener();var t=new egret.Event(egret.Event.CLOSE),e={province:"",province_id:"",province_index:"",city:"",city_id:"",city_index:"",city_pid:"",province_thumb:this.provinceScroller.verticalScrollBar.thumb.y,city_thumb:this.cityScroller.verticalScrollBar.thumb.y};-1!=this.provinceList.selectedIndex&&(e.province=this.provinceList.selectedItem.label,e.province_id=this.provinceList.selectedItem.id,e.province_index=this.provinceList.selectedItem.value),-1!=this.cityList.selectedIndex&&(e.city=this.cityList.selectedItem.label,e.city_id=this.cityList.selectedItem.id,e.city_pid=this.cityList.selectedItem.pid,e.city_index=this.cityList.selectedItem.value),t.data=e,this.dispatchEvent(t),this.parent.removeChild(this)
},e.prototype.clearAllListener=function(){this.stage&&this.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.onStageResize=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;this.bg.width=t,this.bg.height=e,this.groupPanel.x=(t-this.panelBg.width)/2,this.groupPanel.y=(e-this.panelBg.height)/2},e}(eui.Component);__reflect(CityList.prototype,"CityList");var DealerList=function(t){function e(e,i,n){var o=t.call(this)||this;return o.curDealer=e,o.province=i,o.city=n,o}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this),this.provinceList=new eui.List,this.provinceList.width=this.provinceScroller.width,this.provinceScroller.viewport=this.provinceList,this.provinceScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.provinceList.addEventListener(egret.Event.CHANGE,this.onProviceChange,this),this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapOk,this),this.loadDealer(),this.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this),this.onStageResize()},e.prototype.loadDealer=function(){var t=GameData.dealerData[this.province.index].city[this.city.index].dealer;this.initDealerList(t)},e.prototype.onLoadJsonpCoplete=function(t){this.initDealerList(t)},e.prototype.initDealerList=function(t){for(var e=new eui.ArrayCollection,i=-1,n=0;n<t.length;n++)e.addItem({label:t[n].dealer_name,value:n,dealer_code:t[n].dealer_id,id:t[n].dealer_id}),t[n].dealer_name==this.curDealer.name&&(i=n);this.provinceList.dataProvider=e,this.provinceList.selectedIndex=i},e.prototype.onProviceChange=function(t){},e.prototype.onTapOk=function(){this.onClose()},e.prototype.onClose=function(){this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.onCloseComplete()},this)},e.prototype.onCloseComplete=function(){this.clearAllListener();var t=new egret.Event(egret.Event.CLOSE),e={dealer_name:"",dealer_code:"",dealer_index:-1};-1!=this.provinceList.selectedIndex&&(e.dealer_name=this.provinceList.selectedItem.label,e.dealer_code=this.provinceList.selectedItem.dealer_code,e.dealer_index=this.provinceList.selectedItem.value),t.data=e,this.dispatchEvent(t),this.parent.removeChild(this)},e.prototype.clearAllListener=function(){this.stage&&this.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.onStageResize=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;this.bg.width=t,this.bg.height=e,this.groupPanel.x=(t-this.panelBg.width)/2,this.groupPanel.y=(e-this.panelBg.height)/2},e}(eui.Component);__reflect(DealerList.prototype,"DealerList");var Home=function(t){function e(){var e=t.call(this)||this;return e.starTotal=8,e.cloudTotal=5,e.cloudSpeed=[.05,.055,.06,.075,.08],e.cloudR=[8,9,10,11,12],e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.onStageResize()},e.prototype.init=function(){this.initStar(),this.initCloud();var t;this.huojian.alpha=0,t=this.huojian.y,this.huojian.y+=300,egret.Tween.get(this.huojian).to({alpha:1,y:t},1e3,egret.Ease.cubicOut).call(function(){egret.Tween.removeTweens(this.huojian),egret.Tween.get(this.huojian,{loop:!0}).to({y:t-10},800).to({y:t},800)},this),this.btnStart.alpha=0;var e=this.btnStart.y;this.btnStart.y+=300,egret.Tween.get(this.btnStart).wait(300).to({alpha:1,y:e},1e3,egret.Ease.cubicOut).call(function(){this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapStart,this)},this)},e.prototype.initCloud=function(){for(var t=0;t<this.cloudTotal;t++){var e=this["cloud_"+t];e.name="cloud_"+t,e.oldPoint=new egret.Point(e.x,e.y),e.curRad=Math.random()*Math.PI*2,e.speed=this.cloudSpeed[t],e.radius=this.cloudR[t],e.addEventListener(egret.Event.ENTER_FRAME,this.onCloudLoop,this)}},e.prototype.onCloudLoop=function(t){var e=t.currentTarget;e.curRad+=e.speed,e.curRad>2*Math.PI&&(e.curRad=e.curRad-2*Math.PI),e.x=e.oldPoint.x+Math.cos(e.curRad)*e.radius,e.y=e.oldPoint.y+Math.sin(e.curRad)*e.radius},e.prototype.stopCloudLoop=function(){for(var t=0;t<this.cloudTotal;t++){var e=this["cloud_"+t];e.removeEventListener(egret.Event.ENTER_FRAME,this.onCloudLoop,this)}},e.prototype.initStar=function(){for(var t=0;t<this.starTotal;t++){var e=this["star_"+t];e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2;var i=.7*Math.random()+.3,n=Math.floor(500*Math.random()+500);e.scaleX=e.scaleY=i,egret.Tween.get(e,{loop:!0}).to({alpha:0,rotation:360,scaleX:0,scaleY:0},n).to({alpha:1,rotation:720,scaleX:i,scaleY:i},n).set({rotation:0})}},e.prototype.stopStar=function(){for(var t=0;t<this.starTotal;t++){var e=this["star_"+t];egret.Tween.removeTweens(e)}},e.prototype.onTapStart=function(){this.onPageNext(),BaiDu.trackEvent("click_home","click_home_start","click_home_start",1)},e.prototype.onTurnNextPage=function(){return!0},e.prototype.onTurnPrevPage=function(){return!1},e.prototype.onShowNavArrow=function(){return!1},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this),this.stopStar(),this.stopCloudLoop(),egret.Tween.removeTweens(this.huojian)},e.prototype.onStageResize=function(){t.prototype.onStageResize.call(this)},e}(PageBase);__reflect(Home.prototype,"Home");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.isUseLoadingCompleteEvent=!0,e.isComplete=!1,e.radius=143,e.curNum=0,e.totalNum=3,e.isTweening=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.numLabel.text="0%",this.carCircle=new eui.Group,this.carCircle.x=70,this.carCircle.y=226,this.carGroup.addChild(this.carCircle);for(var t=0;t<this.totalNum;t++){var e=this["car_"+t];this.carCircle.addChild(e),e.visible=!0,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2;var i=2*Math.PI/this.totalNum*t-Math.PI/2;e.x=this.radius*Math.cos(i),e.y=this.radius*Math.sin(i)}this.carCircle.mask=this.carMask,egret.Tween.get(this.carCircle,{loop:!0,onChange:this.onTweenChange,onChangeObj:this}).to({rotation:-360},3e3)},e.prototype.onTweenChange=function(){for(var t=0;t<this.totalNum;t++){var e=this["car_"+t];e.rotation=-this.carCircle.rotation}},e.prototype.onTimer=function(){this.carTimer.stop(),this.curNum<this.totalNum-1?this.showCar(this.curNum+1):this.showCar(0)},e.prototype.showCar=function(t){var e=this["car_"+this.curNum];this["car_"+t];e&&(egret.Tween.removeTweens(e),egret.Tween.get(e).to({}))},e.prototype.setProgress=function(t,e){var i=t/e;i>1&&(i=1);var n=Math.floor(100*i);this.numLabel&&(this.numLabel.text=n+"%"),this.isUseLoadingCompleteEvent&&i>=1&&!this.isComplete&&(this.isComplete=!0,this.showComplete())},e.prototype.showComplete=function(){egret.Tween.get(this).to({alpha:0},500).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this),egret.Tween.removeTweens(this.carCircle)},e}(PageBase);__reflect(LoadingUI.prototype,"LoadingUI");var Page1=function(t){function e(){var e=t.call(this)||this;return e.starTotal=8,e.cloudTotal=5,e.cloudSpeed=[.05,.055,.06,.075,.08],e.cloudR=[8,9,10,11,12],e.curQuestion=-1,e.questionTotal=3,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.onStageResize()},e.prototype.init=function(){this.initStar(),this.initCloud(),this.createSwf(),GameData.answers=[],this.curQuestion=-1,this.btnNext.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTapNext,this),this.btnNext.alpha=0,this.btnNext.touchEnabled=!1,this.btnNext.visible=!1,this.showQuestion(0)},e.prototype.showBtnNext=function(){},e.prototype.hideBtnNext=function(){},e.prototype.onTapNext=function(){var t=this.questionGroup.getChildByName("q_"+this.curQuestion);t&&(-1==t.getAnswer()?alert("请选择一个答案！"):(GameData.answers.push(t.getAnswer()),this.curQuestion<this.questionTotal-1?(t.touchEnabled=!1,t.touchChildren=!1,egret.Tween.get(this).wait(500).call(function(){this.hideBtnNext(),this.showQuestion(this.curQuestion+1),this.swfMc.play(),this.curQuestion==this.questionTotal-1&&(this.btnNext.source="page_car_btn_next_2")},this)):egret.Tween.get(this).wait(500).call(function(){this.goNextPage()},this))),BaiDu.trackEvent("click_page1","click_page1_"+this.curQuestion,"click_page1_"+this.curQuestion,1)},e.prototype.showQuestion=function(t){if(this.curQuestion!=t){var e=this.questionGroup.getChildByName("q_"+this.curQuestion);if(e&&egret.Tween.get(e).to({x:-this.stage.stageWidth-50,alpha:0},1e3,egret.Ease.cubicOut).call(function(){this.questionGroup.removeChild(e)},this),-1!=t){var i=new Page1Item(t+1);i.skinName=Utils.getEUISkinName("Page1Item"),this.questionGroup.addChild(i),i.name="q_"+t,i.addEventListener(egret.Event.CHANGE,this.onTapNext,this),i.x=this.stage.stageWidth+50,i.alpha=0,egret.Tween.get(i).to({x:0,alpha:1},1e3,egret.Ease.cubicOut).call(function(){this.showBtnNext()},this)}this.curQuestion=t}},e.prototype.goNextPage=function(){BaiDu.trackEvent("answer","anser_"+GameData.answers.join("_"),"anser_"+GameData.answers.join("_"),1),this.onPageNext()},e.prototype.initCloud=function(){for(var t=0;t<this.cloudTotal;t++){var e=this["cloud_"+t];e.name="cloud_"+t,e.oldPoint=new egret.Point(e.x,e.y),e.curRad=Math.random()*Math.PI*2,e.speed=this.cloudSpeed[t],e.radius=this.cloudR[t],e.addEventListener(egret.Event.ENTER_FRAME,this.onCloudLoop,this)}},e.prototype.onCloudLoop=function(t){var e=t.currentTarget;e.curRad+=e.speed,e.curRad>2*Math.PI&&(e.curRad=e.curRad-2*Math.PI),e.x=e.oldPoint.x+Math.cos(e.curRad)*e.radius,e.y=e.oldPoint.y+Math.sin(e.curRad)*e.radius},e.prototype.stopCloudLoop=function(){for(var t=0;t<this.cloudTotal;t++){var e=this["cloud_"+t];e.removeEventListener(egret.Event.ENTER_FRAME,this.onCloudLoop,this)}},e.prototype.initStar=function(){for(var t=0;t<this.starTotal;t++){var e=this["star_"+t];e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2;var i=.7*Math.random()+.3,n=Math.floor(500*Math.random()+500);e.scaleX=e.scaleY=i,egret.Tween.get(e,{loop:!0}).to({alpha:0,rotation:360,scaleX:0,scaleY:0},n).to({alpha:1,rotation:720,scaleX:i,scaleY:i},n).set({rotation:0})}},e.prototype.stopStar=function(){for(var t=0;t<this.starTotal;t++){var e=this["star_"+t];egret.Tween.removeTweens(e)}},e.prototype.createSwf=function(){var t="trans_car",e=new starlingswf.SwfAssetManager;e.addSpriteSheet(t,RES.getRes(t)),this.swf=new starlingswf.Swf(RES.getRes(t+"_swf"),e,30),this.swfMc=this.swf.createMovie("mc_"+t),this.swfMc.loop=!1,this.swfGroup.addChild(this.swfMc),this.swfMc.x=0,this.swfMc.y=0,this.swfMc.addEventListener("@s_1",this.onSwfEvent,this),this.swfMc.addEventListener("@s_2",this.onSwfEvent,this),this.swfMc.addEventListener("@s_3",this.onSwfEvent,this)},e.prototype.onSwfEvent=function(t){"@s_1"==t.type?this.swfMc.stop(!1):"@s_2"==t.type?this.swfMc.stop():"@s_3"==t.type&&this.swfMc.stop()},e.prototype.onTurnNextPage=function(){return!0},e.prototype.onTurnPrevPage=function(){return!1},e.prototype.onShowNavArrow=function(){return!1},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e.prototype.onStageResize=function(){t.prototype.onStageResize.call(this),this.swfGroup&&(this.swfGroup.y=this.stage.stageHeight-1039-this.contentGroup.y)},e}(PageBase);__reflect(Page1.prototype,"Page1");var Page1Item=function(t){function e(e){var i=t.call(this)||this;return i.curAnswer=-1,i.answerTotal=3,i.questionIndex=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.curAnswer=-1,this.qImg.source="page_car_"+this.questionIndex+"_q";for(var t=0;t<this.answerTotal;t++){var e=this["btnAnswer_"+t];e.index=t,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapBtn,this);var i=this["a_"+t];i.source="page_car_"+this.questionIndex+"_a_txt_"+(t+1)}},e.prototype.onTapBtn=function(t){var e=t.currentTarget.index;this.showAnswer(e)},e.prototype.showAnswer=function(t){if(this.curAnswer!=t){var e=this["radio_"+this.curAnswer];e&&(e.source="page_car_radio_1"),e=this["radio_"+t],e&&(e.source="page_car_radio_2");var i=this["btnBg_"+this.curAnswer];i&&(i.source="page_car_1_a_bg_"+(this.curAnswer+1)),i=this["btnBg_"+t],i&&(i.source="page_car_1_a_bg_"+(t+1)+"_1"),this.curAnswer=t;var n=new egret.Event(egret.Event.CHANGE);n.data=t,this.dispatchEvent(n)}},e.prototype.getAnswer=function(){return this.curAnswer},e}(eui.Component);__reflect(Page1Item.prototype,"Page1Item");var Page2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.onStageResize()},e.prototype.init=function(){ToolTween.initTween(this.title,0,!1,200),ToolTween.initTween(this.title_1,1,!1,200),ToolTween.initTween(this.img_0,2,!1,200),ToolTween.initTween(this.img_1,3,!1,200),ToolTween.initTween(this.img_2,4,!1,200),ToolTween.initTween(this.img_3,5,!1,200),ToolTween.initTween(this.btnJoin,6,!1,200).call(function(){this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTapNext,this)},this),this.showPop()},e.prototype.showPop=function(){var t="page_pop_img_1";GameData.answers[2]>1&&(t="page_pop_img_2");var e=new PagePop(t);e.skinName=Utils.getEUISkinName("PagePop"),this.addChild(e)},e.prototype.onTapNext=function(){BaiDu.trackEvent("click_page2","click_page2_join","click_page2_join",1),this.onPageNext()},e.prototype.onTurnNextPage=function(){return!0},e.prototype.onTurnPrevPage=function(){return!1},e.prototype.onShowNavArrow=function(){return!1},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e.prototype.onStageResize=function(){t.prototype.onStageResize.call(this)},e}(PageBase);__reflect(Page2.prototype,"Page2");var Page3=function(t){function e(){var e=t.call(this)||this;return e.textDisplaySize=26,e.textDisplayColor=8421504,e.promptDisplaySize=26,e.promptDisplayColor=8421504,e.curCar={name:"",id:""},e.curProvince={name:"",id:"",index:-1},e.curCity={name:"",id:"",pid:"",index:-1},e.curDealer={name:"",code:"",index:-1},e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.initInput(),this.onStageResize()},e.prototype.initInput=function(){this.inputName.maxChars=5,this.inputName.textDisplay.size=this.textDisplaySize,this.inputName.textDisplay.textColor=this.textDisplayColor,this.inputName.promptDisplay.size=this.promptDisplaySize,this.inputName.promptDisplay.textColor=this.promptDisplayColor,this.inputName.prompt="请输入姓名",this.inputName.addEventListener(egret.Event.CHANGE,this.onInputChange,this),this.inputMobile.maxChars=11,this.inputMobile.restrict="0-9",this.inputMobile.textDisplay.size=this.textDisplaySize,this.inputMobile.textDisplay.textColor=this.textDisplayColor,this.inputMobile.promptDisplay.size=this.promptDisplaySize,this.inputMobile.promptDisplay.textColor=this.promptDisplayColor,this.inputMobile.prompt="请输入手机号",this.inputMobile.addEventListener(egret.Event.CHANGE,this.onInputChange,this),this.inputCar.text="请选择车型",this.inputCar.textColor=this.promptDisplayColor,this.inputProvince.textColor=this.promptDisplayColor,this.inputCity.textColor=this.promptDisplayColor,this.inputDealer.textColor=this.promptDisplayColor,this.inputCar.size=this.textDisplaySize,this.inputProvince.size=this.textDisplaySize,this.inputCity.size=this.textDisplaySize,this.inputDealer.size=this.textDisplaySize,this.inputDealer.multiline=!0,this.inputDealer.lineSpacing=6,this.btnCar.addEventListener(egret.TouchEvent.TOUCH_END,this.onTapCar,this),this.btnProvince.addEventListener(egret.TouchEvent.TOUCH_END,this.onTapProvince,this),this.btnCity.addEventListener(egret.TouchEvent.TOUCH_END,this.onTapCity,this),this.btnDealer.addEventListener(egret.TouchEvent.TOUCH_END,this.onTapDealer,this),this.btnSubmit.addEventListener(egret.TouchEvent.TOUCH_END,this.onTapSubmit,this),this.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapShare,this),this.btnShuoMing.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapShuoMing,this)},e.prototype.onTapShare=function(){var t=new PageShare;t.skinName=Utils.getEUISkinName("PageShare"),this.stage.addChild(t),BaiDu.trackEvent("click_page3","click_page3_share","click_page3_share",1)},e.prototype.onTapShuoMing=function(){var t=new PageShuoMing;t.skinName=Utils.getEUISkinName("PageShuoMing"),this.stage.addChild(t),BaiDu.trackEvent("click_page3","click_page3_shuoming","click_page3_shuoming",1)},e.prototype.onInputChange=function(){this.stage.dirtyRegionPolicy=egret.DirtyRegionPolicy.OFF,this.stage.dirtyRegionPolicy=egret.DirtyRegionPolicy.ON},e.prototype.onTapCar=function(){var t=new CarTypeList(this.curCar);t.skinName=Utils.getEUISkinName("CarTypeList"),this.stage.addChild(t),t.addEventListener(egret.Event.CLOSE,this.onCloseCarType,this)},e.prototype.onCloseCarType=function(t){this.curCar.name=t.data.name,this.curCar.id=t.data.id,""==this.curCar.name?(this.inputCar.text="请选择车型",this.inputCar.textColor=this.promptDisplayColor):this.inputCar.text=this.curCar.name},e.prototype.onTapProvince=function(){var t=new CityList(this.curProvince.name,this.curCity.name);t.skinName=Utils.getEUISkinName("CityList"),this.stage.addChild(t),t.addEventListener(egret.Event.CLOSE,this.onCloseCityList,this)},e.prototype.onCloseCityList=function(t){var e={name:this.curCity.name,id:this.curCity.id,pid:this.curCity.pid,index:this.curCity.index},i={name:this.curProvince.name,id:this.curProvince.id,index:this.curProvince.index};this.curProvince.name=t.data.province,this.curProvince.id=t.data.province_id,this.curProvince.index=t.data.province_index,this.curCity.name=t.data.city,this.curCity.id=t.data.city_id,this.curCity.pid=t.data.city_pid,this.curCity.index=t.data.city_index,""==this.curProvince.name?(this.initProvince(),this.initCity(),this.initDealer()):(this.inputProvince.text=this.curProvince.name,""==this.curCity.name?this.initCity():this.inputCity.text=this.curCity.name),(e.id!=this.curCity.id||i.id!=this.curProvince.id)&&this.initDealer()},e.prototype.initProvince=function(){this.inputProvince.text="请选择省份",this.curProvince={name:"",id:"",index:-1}},e.prototype.initCity=function(){this.inputCity.text="请选择城市",this.curCity={name:"",id:"",pid:"",index:-1}},e.prototype.initDealer=function(){this.inputDealer.text="请选择经销商",this.curDealer={name:"",code:"",index:-1}},e.prototype.onTapCity=function(){this.onTapProvince()},e.prototype.onTapDealer=function(){if(""==this.curCity.id)return void alert("请先选择城市！");var t=new DealerList(this.curDealer,this.curProvince,this.curCity);t.skinName=Utils.getEUISkinName("DealerList"),this.stage.addChild(t),t.addEventListener(egret.Event.CLOSE,this.onCloseDealerList,this)},e.prototype.onCloseDealerList=function(t){this.curDealer.name=t.data.dealer_name,this.curDealer.code=t.data.dealer_code,""==this.curDealer.name?this.inputDealer.text="请选择经销商":this.inputDealer.text=this.curDealer.name},e.prototype.onTapSubmit=function(){this.checkInput()&&(this.setBtnStatus(!1),this.saveInputData(),BaiDu.trackEvent("click_page3","click_page3_submit","click_page3_submit",1))},e.prototype.saveInputData=function(){var t={username:this.inputName.text,numberphone:this.inputMobile.text,dealer:this.curProvince.id+","+this.curCity.id+","+this.curDealer.code,model:this.curCar.id,answer:GameData.answers.join("_"),key:GameData.key,source:1};console.log(t);var e=new egret.URLRequest;e.url=GameData.userLotterURL;var i=$.param(t);e.data=new egret.URLVariables(i),e.method=egret.URLRequestMethod.POST;var n=new egret.URLLoader;n.addEventListener(egret.Event.COMPLETE,this.onSaveComplete,this),n.load(e)},e.prototype.onSaveComplete=function(t){var e=t.target,i=JSON.parse(e.data);if(1003==i.start)return alert("该手机已经注册!"),void this.setBtnStatus(!0);if(1002==i.start)return alert("请输入正确的手机号!"),void this.setBtnStatus(!0);if(1006==i.start)return alert("提交太频繁，请稍候在试!"),void this.setBtnStatus(!0);if(2007==i.start)return alert("活动已经结束，谢谢您的参与!"),void this.setBtnStatus(!0);var n=0;if(2004==i.start?(n=Number(i.data),n>3&&(n=0)):n=0,n>=1&&3>=n){var o=new PageAward(n);o.skinName=Utils.getEUISkinName("PageAward"),o.addEventListener(egret.Event.CLOSE,this.onCloseAward,this),this.addChild(o)}else{var s=new PageUnAward;s.skinName=Utils.getEUISkinName("PageUnAward"),s.addEventListener(egret.Event.CLOSE,this.onCloseAward,this),this.addChild(s)}},e.prototype.onCloseAward=function(){this.onPageNext()},e.prototype.setBtnStatus=function(t){this.btnCar.touchEnabled=t,this.btnProvince.touchEnabled=t,this.btnCity.touchEnabled=t,this.btnDealer.touchEnabled=t,this.btnSubmit.touchEnabled=t},e.prototype.checkInput=function(){var t=!0;if(""==this.inputName.text)t=!1,alert("请输入姓名！");else if(""==this.inputMobile.text)t=!1,alert("请输入手机！");else if(Utils.checkMobile(this.inputMobile.text)){if(""==this.curCar.name)t=!1,alert("请选择试驾车型！");else if(""==this.curProvince.name)t=!1,alert("请选择省份！");else if(""==this.curCity.name)t=!1,alert("请选择城市！");else if(""==this.curDealer.name){var e=GameData.dealerData[this.curProvince.index].city[this.curCity.index].dealer;e&&e.length>0&&(t=!1,alert("请选经销商！"))}}else t=!1,alert("请输入正确的手机号码！");return t},e.prototype.onTapBack=function(){BaiDu.trackEvent("click_page3","click_page3_back","click_page3_back",1),this.touchEnabled=!1,this.touchChildren=!1,egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.onShowNavArrow=function(){return!1},e.prototype.onTurnNextPage=function(){return!0},e.prototype.onTurnPrevPage=function(){return!1},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e}(PageBase);__reflect(Page3.prototype,"Page3");var PageAward=function(t){function e(e){var i=t.call(this)||this;return i.prizeID=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,this.levelImg.visible=!1,this.levelImg.source="page_award_level_"+this.prizeID,this.prizeID>=1&&this.prizeID<=3&&(this.levelImg.visible=!0),egret.Tween.get(this).to({alpha:1},300).call(function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this)},e.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e}(PageBase);__reflect(PageAward.prototype,"PageAward");var MovieClipJPG=function(t){function e(e,i){void 0===i&&(i=15);var n=t.call(this)||this;return n.curFrame=1,n.playTimes=0,n.curPlayTimes=0,n.jpgList=e,n.frameRate=i,n.init(),n}return __extends(e,t),e.prototype.setImageList=function(t){this.stop(),this.jpgList=t,this.curPlayTimes=0,this.totalFrame=this.jpgList.length,this.totalFrame>0&&this.updateImageTexture(1)},e.prototype.getCurrentFrame=function(){return this.curFrame},e.prototype.play=function(t){void 0===t&&(t=0),this.playTimes=t,this.curPlayTimes=0,this.timer.reset(),this.timer.start()},e.prototype.stop=function(){this.timer.stop()},e.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=0),this.playTimes=e,this.curPlayTimes=0,this.updateImageTexture(t),this.timer.reset(),this.timer.start()},e.prototype.gotoAndStop=function(t){this.stop(),this.updateImageTexture(t)},e.prototype.clearEventListener=function(){this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.ontimer,this)},e.prototype.init=function(){this.curPlayTimes=0,this.totalFrame=this.jpgList.length,this.jpgImage=new egret.Bitmap,this.addChild(this.jpgImage),this.totalFrame>0&&this.updateImageTexture(1),this.timer=new egret.Timer(1e3/this.frameRate),this.timer.addEventListener(egret.TimerEvent.TIMER,this.ontimer,this)},e.prototype.ontimer=function(t){this.curFrame<this.totalFrame?this.updateImageTexture(this.curFrame+1):this.playTimes<1?this.updateImageTexture(1):(this.curPlayTimes++,this.curPlayTimes>=this.playTimes?this.playComplete():this.updateImageTexture(1))},e.prototype.playComplete=function(){this.stop(),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},e.prototype.updateImageTexture=function(t){1>t?t=1:t>this.totalFrame&&(t=this.totalFrame),this.jpgImage.texture=RES.getRes(this.jpgList[t-1]),this.curFrame=t},e}(egret.Sprite);__reflect(MovieClipJPG.prototype,"MovieClipJPG");var PageJieShu=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this)},e.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e}(PageBase);__reflect(PageJieShu.prototype,"PageJieShu");var PageNavArrow=function(t){function e(e){void 0===e&&(e=8);var i=t.call(this)||this;return i.toBottom=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,this.imgArrowInitY=this.imgArrow.y,this.stage.addEventListener(GameEvent.PAGE_NAV_ARROW_SHOW,this.showNavArrow,this),this.stage.addEventListener(GameEvent.PAGE_NAV_ARROW_HIDE,this.hideNavArrow,this),this.stage.addEventListener(GameEvent.PAGE_NAV_ARROW_CHANGE,this.changeArrow,this),this.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this),this.onStageResize()},e.prototype.changeArrow=function(t){t.data},e.prototype.showNavArrow=function(){egret.Tween.removeTweens(this),this.alpha=0,egret.Tween.get(this).to({alpha:1},300),egret.Tween.removeTweens(this.imgArrow),this.imgArrow.y=this.imgArrowInitY,egret.Tween.get(this.imgArrow,{loop:!0}).to({y:this.imgArrowInitY-10},500).to({y:this.imgArrowInitY},500)},e.prototype.hideNavArrow=function(){egret.Tween.removeTweens(this.imgArrow),this.imgArrow.y=this.imgArrowInitY,egret.Tween.get(this).to({alpha:0},300)},e.prototype.clearAllListener=function(){this.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.onStageResize=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;this.x=(t-this.width)/2,this.y=e-this.height-this.toBottom},e}(eui.Component);__reflect(PageNavArrow.prototype,"PageNavArrow");var PageNavDot=function(t){function e(e,i){var n=t.call(this)||this;return n.curPage=-1,n.total=e,n.config=i,n.init(),n}return __extends(e,t),e.prototype.init=function(){for(var t=this.total*this.config.radius*2+this.config.space*(this.total-1),e=0;e<this.total;e++){var i=new egret.Shape;i.name="dot_"+e,i.x=-t/2+this.config.radius+(2*this.config.radius+this.config.space)*e,this.drawShape(i,this.config.colorNormal),i.anchorOffsetX=this.config.radius/2,i.anchorOffsetY=this.config.radius/2,this.addChild(i)}},e.prototype.goPage=function(t){if(!(t>=this.total||this.curPage==t)){var e;this.curPage>=0&&(e=this.getChildByName("dot_"+this.curPage),this.drawShape(e,this.config.colorNormal)),e=this.getChildByName("dot_"+t),e&&this.drawShape(e,this.config.colorSelected),this.curPage=t}},e.prototype.drawShape=function(t,e){var i=t.graphics;i.clear(),i.beginFill(e),i.drawCircle(0,0,this.config.radius),i.endFill()},e}(egret.Sprite);__reflect(PageNavDot.prototype,"PageNavDot");var PagePop=function(t){function e(e){var i=t.call(this)||this;return i.imgName="",i.imgName=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.img.source=this.imgName,this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this)},e.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e}(PageBase);__reflect(PagePop.prototype,"PagePop");var PageShare=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this)},e.prototype.createSwf=function(t){var e=new starlingswf.SwfAssetManager;e.addSpriteSheet(t,RES.getRes(t)),this.swf=new starlingswf.Swf(RES.getRes(t+"_swf"),e,30),this.swfMc=this.swf.createMovie("mc_"+t),this.swfMc.loop=!0,this.contentGroup.addChild(this.swfMc),this.swfMc.x=this.contentGroup.width-209-10,this.swfMc.y=10},e.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this),this.swfMc&&this.swfMc.stop()},e.prototype.onStageResize=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight,i=Math.max(t/GameData.DESIGN_PORTRAIT_WIDTH,e/GameData.DESIGN_PORTRAIT_HEIGHT),n=(t-GameData.DESIGN_PORTRAIT_WIDTH*i)/2,o=(e-GameData.DESIGN_PORTRAIT_HEIGHT*i)/2;this.bg&&(this.bg.x=n,this.bg.y=o,this.bg.scaleX=i,this.bg.scaleY=i),this.contentGroup&&(this.contentGroup.x=t-GameData.DESIGN_PORTRAIT_WIDTH,this.contentGroup.y=0)},e}(PageBase);__reflect(PageShare.prototype,"PageShare");var PageShuoMing=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this)},e.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e}(PageBase);__reflect(PageShuoMing.prototype,"PageShuoMing");var PageTestDrivePop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this)},e.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e}(PageBase);__reflect(PageTestDrivePop.prototype,"PageTestDrivePop");var PageUnAward=function(t){function e(){return t.call(this)||this
}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.alpha=0,egret.Tween.get(this).to({alpha:1},300).call(function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},this)},e.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),egret.Tween.get(this).to({alpha:0},300).call(function(){this.clearAllListener(),this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),this.parent.removeChild(this)},this)},e.prototype.clearAllListener=function(){t.prototype.clearAllListener.call(this)},e}(PageBase);__reflect(PageUnAward.prototype,"PageUnAward");var ToolTween=function(){function t(){}return t.initTween=function(e,i,n,o){void 0===n&&(n=!0),void 0===o&&(o=100);var s=n?e.x:e.y,r={alpha:1,x:e.x,y:e.y};return n?(e.x+=o,r.x=s):(e.y+=o,r.y=s),e.alpha=0,egret.Tween.get(e).wait(t.initDelayTime+t.delayTime*i).to(r,t.tweenTime,egret.Ease.cubicOut)},t}();ToolTween.tweenTime=1e3,ToolTween.delayTime=200,ToolTween.initDelayTime=400,__reflect(ToolTween.prototype,"ToolTween");var SoundPanel=function(t){function e(){var e=t.call(this)||this;return e.bgSoundPosition=0,e.bgSoundFlag=!1,e.soundOnImgName="home_sound_on",e.soundOffImgName="home_sound_off",e.soundInitVolum=1,e.soundVolume=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){this.init()},e.prototype.init=function(){this.btnSound.alpha=0,this.btnSound.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapBtnSound,this),this.h5Sound=document.createElement("audio"),this.h5Sound.id="bgsound",this.h5Sound.src=RES.getRes("sound_bg").url,this.h5Sound.loop=!0,this.h5Sound["class"]="hide";var t=document.getElementsByTagName("body")[0];t.appendChild(this.h5Sound),this.icon.anchorOffsetX=this.icon.width/2,this.icon.anchorOffsetY=this.icon.height/2,this.icon.x+=this.icon.anchorOffsetX,this.icon.y+=this.icon.anchorOffsetY,this.stage.addEventListener(GameEvent.SOUND_BG_PLAY,this.onSoundPlay,this),this.stage.addEventListener(GameEvent.SOUND_BG_STOP,this.onSoundStop,this),this.stage.addEventListener(GameEvent.SOUND_SHOW,this.onShow,this),this.stage.addEventListener(GameEvent.SOUND_HIDE,this.onHide,this),Utils.isWeiXin?(this.wxInterval=setInterval(this.checkWeixinJSBridge.bind(this),200),this.checkWeixinJSBridge()):Utils.isIos?this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFirst,this):this.initSound()},e.prototype.onClickFirst=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFirst,this),this.initSound()},e.prototype.checkWeixinJSBridge=function(){Utils.isWeiXin&&"undefined"!=typeof window.WeixinJSBridge&&"undefined"!=typeof window.WeixinJSBridge.invoke&&(clearInterval(this.wxInterval),window.WeixinJSBridge.invoke("getNetworkType",{},function(t){this.initSound()}.bind(this)))},e.prototype.initSound=function(){this.btnSound.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapBtnSound,this),this.bgSoundPlay()},e.prototype.onShow=function(t){this.visible=!1},e.prototype.onHide=function(t){this.visible=!1},e.prototype.startAni=function(){this.icon.source=this.soundOnImgName,egret.Tween.removeTweens(this.icon),egret.Tween.get(this.icon,{loop:!0}).to({rotation:360},2e3)},e.prototype.stopAni=function(){this.icon.source=this.soundOffImgName,egret.Tween.removeTweens(this.icon),this.icon.rotation=0},e.prototype.onSoundPlay=function(t){this.bgSoundPlay()},e.prototype.onSoundStop=function(t){this.bgSoundStop()},e.prototype.onTapBtnSound=function(t){this.bgSoundFlag?this.bgSoundStop():this.bgSoundPlay()},e.prototype.bgSoundPlay=function(){this.bgSoundFlag=!0,this.h5Sound.play(),this.startAni()},e.prototype.onBgPlayComplete=function(){},e.prototype.onChangeVolume=function(){},e.prototype.bgSoundStop=function(){this.bgSoundFlag=!1,this.h5Sound.pause(),this.stopAni()},e}(eui.Component);__reflect(SoundPanel.prototype,"SoundPanel");var starlingswf;!function(t){var e=function(){function t(){}return t.setBlendMode=function(e,i){t.modes[i]&&(e.blendMode=i)},t}();e.modes={normal:!0,add:!0},t.SwfBlendMode=e,__reflect(e.prototype,"starlingswf.SwfBlendMode")}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(e){function i(t,i,n,o,s){void 0===s&&(s=null);var r=e.call(this)||this;return r._isPlay=!1,r.loop=!0,r._completeFunction=null,r._hasCompleteListener=!1,r._frames=t,r._labels=i,r._displayObjects=n,r._frameEvents=s,r._startFrame=0,r._endFrame=r._frames.length-1,r._ownerSwf=o,r.setCurrentFrame(0),r.play(),r}return __extends(i,e),i.prototype.update=function(){if(this._isPlay)if(this._currentFrame>this._endFrame){var t=!1;if(this.loop&&this._startFrame!=this._endFrame||(this._ownerSwf&&this.stop(!1),t=!0),this._hasCompleteListener&&this.dispatchEventWith(egret.Event.COMPLETE),t)return;this.setCurrentFrame(this._startFrame)}else this.setCurrentFrame(this._currentFrame),this._currentFrame+=1},i.prototype.setCurrentFrame=function(e){this.removeChildren(),this._currentFrame=e,this.__frameInfos=this._frames[this._currentFrame];for(var i,n,o,s,r=this.__frameInfos.length,a=0;r>a;a++){switch(i=this.__frameInfos[a],s=i[10],n=this._displayObjects[i[0]][s],n.skewX=i[6],n.skewY=i[7],n.alpha=i[8],n.name=i[9],n.x=i[2],n.y=i[3],i[1]){case t.Swf.dataKey_Scale9:n.width=i[11],n.height=i[12],t.SwfBlendMode.setBlendMode(n,i[13]);break;case t.Swf.dataKey_ShapeImg:n.width=i[11],n.height=i[12],t.SwfBlendMode.setBlendMode(n,i[13]);break;case t.Swf.dataKey_TextField:o=n,o.width=i[11],o.height=i[12],o.fontFamily=i[13],o.textColor=i[14],o.size=i[15],o.textAlign=i[16],i[19]&&"\r"!=i[19]&&""!=i[19]&&(o.text=i[19]),t.SwfBlendMode.setBlendMode(o,i[20]);break;default:n.scaleX=i[4],n.scaleY=i[5],t.SwfBlendMode.setBlendMode(n,i[11])}this.addChild(n),n.$parent=this}null!=this._frameEvents&&null!=this._frameEvents[this._currentFrame]&&this.dispatchEventWith(this._frameEvents[this._currentFrame])},i.prototype.getCurrentFrame=function(){return this._currentFrame},i.prototype.play=function(){this._isPlay=!0,this._ownerSwf.swfUpdateManager.addSwfAnimation(this);var e,i,n;for(e in this._displayObjects)if(0==e.indexOf(t.Swf.dataKey_MovieClip)){i=this._displayObjects[e],n=i.length;for(var o=0;n>o;o++)i[o].play()}},i.prototype.stop=function(e){if(void 0===e&&(e=!0),this._isPlay=!1,this._ownerSwf.swfUpdateManager.removeSwfAnimation(this),e){var i,n,o;for(i in this._displayObjects)if(0==i.indexOf(t.Swf.dataKey_MovieClip)){n=this._displayObjects[i],o=n.length;for(var s=0;o>s;s++)n[s].stop(e)}}},i.prototype.gotoAndStop=function(t,e){void 0===e&&(e=!0),this.goTo(t),this.stop(e)},i.prototype.gotoAndPlay=function(t){this.goTo(t),this.play()},i.prototype.setCurrentFrameByLabel=function(t){if("string"==typeof t){var e=this.getLabelData(t);this.setCurrentFrame(e[1])}},i.prototype.goTo=function(t){if("string"==typeof t){var e=this.getLabelData(t);this._currentLabel=e[0],this._currentFrame=this._startFrame=e[1],this._endFrame=e[2]}else"number"==typeof t&&(this._currentFrame=this._startFrame=t,this._endFrame=this._frames.length-1);this.setCurrentFrame(this._currentFrame)},i.prototype.getLabelData=function(t){for(var e,i=this._labels.length,n=0;i>n;n++)if(e=this._labels[n],e[0]==t)return e;return null},i.prototype.isPlay=function(){return this._isPlay},i.prototype.totalFrames=function(){return this._frames.length},i.prototype.currentLabel=function(){return this._currentLabel},i.prototype.labels=function(){for(var t=this._labels.length,e=[],i=0;t>i;i++)e.push(this._labels[i][0]);return e},i.prototype.hasLabel=function(t){var e=this.labels();return!(-1==e.indexOf(t))},i.prototype.addEventListener=function(t,i,n,o,s){void 0===o&&(o=!1),void 0===s&&(s=0),e.prototype.$addListener.call(this,t,i,n,o,s),this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)},i.prototype.removeEventListener=function(t,e,i,n){void 0===n&&(n=!1),this.removeEventListener(t,e,i,n),this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)},i}(t.SwfSprite);t.SwfMovieClip=e,__reflect(e.prototype,"starlingswf.SwfMovieClip",["starlingswf.ISwfAnimation"])}(starlingswf||(starlingswf={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var starlingswf;!function(t){var e=function(){function e(i,n,o){void 0===o&&(o=24),this._swfData=i,this._assetManager=n,this._createDisplayFuns=new Object,this._createDisplayFuns[e.dataKey_Sprite]=this.createSprite,this._createDisplayFuns[e.dataKey_MovieClip]=this.createMovie,this._createDisplayFuns[e.dataKey_Image]=this.createImage,this._createDisplayFuns[e.dataKey_Scale9]=this.createS9Image,this._createDisplayFuns[e.dataKey_ShapeImg]=this.createShapeImage,this._createDisplayFuns[e.dataKey_TextField]=this.createTextField,this.swfUpdateManager=t.SwfUpdateManager.createSwfUpdateManager(o)}return e.prototype.createSprite=function(i,n,o){void 0===n&&(n=null),void 0===o&&(o=null),null==o&&(o=this._swfData[e.dataKey_Sprite][i]);for(var s,r,a,h=new t.SwfSprite,c=o.length,l=0;c>l;l++)s=o[l],a=this._createDisplayFuns[s[1]],null!=a&&(r=a.apply(this,[s[0],s]),r.name=s[9],r.x=s[2],r.y=s[3],s[1]!=e.dataKey_Scale9&&s[1]!=e.dataKey_ShapeImg&&(r.scaleX=s[4],r.scaleY=s[5]),r.skewX=s[6],r.skewY=s[7],r.alpha=s[8],h.addChild(r));return null!=n&&t.SwfBlendMode.setBlendMode(h,n[11]),h},e.prototype.createMovie=function(i,n){void 0===n&&(n=null);var o,s,r,a,h,c=this._swfData[e.dataKey_MovieClip][i],l=c.objCount,p={};for(h in l){s=l[h][0],r=l[h][1],o=null==p[h]?[]:p[h];for(var u=0;r>u;u++)a=this._createDisplayFuns[s],null!=a&&o.push(a.apply(this,[h,null]));p[h]=o}var d=new t.SwfMovieClip(c.frames,c.labels,p,this,c.frameEvents);return d.loop=c.loop,null!=n&&t.SwfBlendMode.setBlendMode(d,n[11]),d},e.prototype.createImage=function(i,n){void 0===n&&(n=null);var o=this._swfData[e.dataKey_Image][i],s=this._assetManager.createBitmap(i);return s.anchorOffsetX=o[0],s.anchorOffsetY=o[1],null!=n&&t.SwfBlendMode.setBlendMode(s,n[11]),s},e.prototype.createS9Image=function(i,n){void 0===n&&(n=null);var o=this._swfData[e.dataKey_Scale9][i],s=this._assetManager.createBitmap(i);return s.scale9Grid=new egret.Rectangle(o[0],o[1],o[2],o[3]),null!=n&&(s.width=n[10],s.height=n[11],t.SwfBlendMode.setBlendMode(s,n[13])),s},e.prototype.createShapeImage=function(e,i){void 0===i&&(i=null);var n=this._assetManager.createBitmap(e);return n.fillMode=egret.BitmapFillMode.REPEAT,null!=i&&(n.width=i[10],n.height=i[11],t.SwfBlendMode.setBlendMode(n,i[13])),n},e.prototype.createTextField=function(e,i){void 0===i&&(i=null);var n=new egret.TextField;return null!=i&&(n.width=i[10],n.height=i[11],n.fontFamily=i[12],n.textColor=i[13],n.size=i[14],n.textAlign=i[15],n.text=i[18],t.SwfBlendMode.setBlendMode(n,i[20])),n},e}();e.dataKey_Sprite="spr",e.dataKey_Image="img",e.dataKey_MovieClip="mc",e.dataKey_TextField="text",e.dataKey_Button="btn",e.dataKey_Scale9="s9",e.dataKey_ShapeImg="shapeImg",e.dataKey_Component="comp",e.dataKey_Particle="particle",t.Swf=e,__reflect(e.prototype,"starlingswf.Swf")}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(){function t(){this._sheets={},this._textures={}}return t.prototype.addSpriteSheet=function(t,e){this._sheets[t]=e},t.prototype.addTexture=function(t,e){this._textures[t]=e},t.prototype.createBitmap2=function(t){var e,i,n;for(n in this._sheets)if(e=this._sheets[n],i=e.getTexture(t),null!=i)break;return null==i&&(i=this._textures[t]),null==i?null:void 0},t.prototype.createBitmap=function(t){var e,i,n,o;for(o in this._sheets)if(e=this._sheets[o],n=e.getTexture(t),null!=n)break;return null==n&&(n=this._textures[t]),null==n?null:(i=new egret.Bitmap,i.texture=n,i)},t}();t.SwfAssetManager=e,__reflect(e.prototype,"starlingswf.SwfAssetManager")}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(){function t(){}return t.createSwfUpdateManager=function(e){var i=new t;return i._animations=[],i._addQueue=[],i._removeQueue=[],i._currentTime=0,i.setFps(e),egret.Ticker.getInstance().register(i.update,i),i},t.prototype.setFps=function(t){this._fps=t,this._fpsTime=1e3/t},t.prototype.addSwfAnimation=function(t){this._addQueue.push(t)},t.prototype.removeSwfAnimation=function(t){this._removeQueue.push(t)},t.prototype.updateAdd=function(){for(var t,e,i=this._addQueue.length,n=0;i>n;n++)e=this._addQueue.pop(),t=this._animations.indexOf(e),-1==t&&this._animations.push(e)},t.prototype.updateRemove=function(){for(var t,e,i=this._removeQueue.length,n=0;i>n;n++)e=this._removeQueue.pop(),t=this._animations.indexOf(e),-1!=t&&this._animations.splice(t,1)},t.prototype.update=function(t){if(this._currentTime+=t,!(this._currentTime<this._fpsTime)){this._currentTime-=this._fpsTime,this._currentTime>this._fpsTime&&(this._currentTime=0),this.updateRemove(),this.updateAdd();for(var e=this._animations.length,i=0;e>i;i++)this._animations[i].update()}},t}();t.SwfUpdateManager=e,__reflect(e.prototype,"starlingswf.SwfUpdateManager")}(starlingswf||(starlingswf={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var TouchMoveTurnPage=function(t){function e(e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=10);var o=t.call(this)||this;return o.maxDist=10,o.beginPoint=new egret.Point(0,0),o.maxDist=n,o.isStopPropagation=i,null==e?o.stage=egret.MainContext.instance.stage:o.stage=e,o}return __extends(e,t),e.prototype.startListener=function(){this.stopListener(),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.stopListener=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchBegin=function(t){this.touchID=t.touchPointID,this.beginPoint=new egret.Point(t.stageX,t.stageY),this.isStopPropagation},e.prototype.onTouchEnd=function(t){if(this.touchID==t.touchPointID){var e=t.stageX-this.beginPoint.x,i=t.stageY-this.beginPoint.y;e>this.maxDist&&(this.dispatchEvent(new GameEvent(GameEvent.PAGE_RIGHT)),this.isStopPropagation&&t.stopPropagation()),e<-this.maxDist&&(this.dispatchEvent(new GameEvent(GameEvent.PAGE_LEFT)),this.isStopPropagation&&t.stopPropagation()),i>this.maxDist&&this.dispatchEvent(new GameEvent(GameEvent.PAGE_PREV)),i<-this.maxDist&&this.dispatchEvent(new GameEvent(GameEvent.PAGE_NEXT))}},e}(egret.EventDispatcher);__reflect(TouchMoveTurnPage.prototype,"TouchMoveTurnPage");var BaiDu=function(){function t(){}return t.trackPageview=function(t){window._hmt&&window._hmt.push(["_trackPageview",t]),window.ga&&window.ga("send",{hitType:"pageview",page:t})},t.trackEvent=function(t,e,i,n){window._hmt&&window._hmt.push(["_trackEvent",t,e,i,n]),window.ga&&window.ga("send",{hitType:"event",eventCategory:t,eventAction:e,eventLabel:i,eventValue:n})},t.setCustomVar=function(t,e,i,n){window._hmt&&window._hmt.push(["_setCustomVar",t,e,i,n])},t}();__reflect(BaiDu.prototype,"BaiDu");var Countdown=function(t){function e(e){void 0===e&&(e=10);var i=t.call(this)||this;return i.isPause=!1,i.maxSec=e,i.timer=new egret.Timer(30),i.timer.addEventListener(egret.TimerEvent.TIMER,i.onTimer,i),i}return __extends(e,t),e.prototype.setMaxSec=function(t){this.maxSec=t},e.prototype.start=function(){this.initTime=egret.getTimer(),this.isPause=!1,this.timer.reset(),this.timer.start()},e.prototype.stop=function(){this.timer.stop()},e.prototype.pause=function(){this.isPause?(this.timer.reset(),this.timer.start()):this.timer.stop(),this.isPause=!this.isPause},e.prototype.onTimer=function(t){var e=egret.getTimer()-this.initTime;e=1e3*this.maxSec-e,0>e&&(e=0);var i=new egret.Event(egret.Event.CHANGE);if(i.data={msec:e},this.dispatchEvent(i),0>=e){this.stop();var i=new egret.Event(egret.Event.COMPLETE);i.data=e,this.dispatchEvent(i)}},e}(egret.EventDispatcher);__reflect(Countdown.prototype,"Countdown");var ServerTime=function(t){function e(e,i){void 0===i&&(i=30);var n=t.call(this)||this;return n.serverTimeURL="",n.curServerTime=0,n.serverTimeURL=e,n.intervalTime=i,n.changeTimer=new egret.Timer(i),n.changeTimer.addEventListener(egret.TimerEvent.TIMER,n.onTimer,n),""!=e&&n.loadServerTimeJsonp(),n}return __extends(e,t),e.prototype.startTimer=function(){this.changeTimer.reset(),this.changeTimer.start()},e.prototype.stopTimer=function(){this.changeTimer.stop()},e.prototype.onTimer=function(){this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},e.prototype.getMsec=function(){return(this.curServerTime<=0||isNaN(this.curServerTime))&&(this.curServerTime=(new Date).getTime(),this.curLocalTime=egret.getTimer()),this.curServerTime+(egret.getTimer()-this.curLocalTime)},e.prototype.getDate=function(){return new Date(this.getMsec())},e.prototype.getLastTimeMsec=function(t){var e=new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.sec,t.msec).getTime();return e-this.getMsec()},e.prototype.loadServerTimeJsonp=function(){$.ajax({url:this.serverTimeURL,dataType:"jsonp",jsonp:"callback",data:{ran:Math.random()},success:function(t){this.onLoadJsonpComplete(t)}.bind(this),error:function(){this.onLoadError()}.bind(this)})},e.prototype.onLoadJsonpComplete=function(t){t.success?this.curServerTime=new Date(t.result).getTime():this.curServerTime=(new Date).getTime(),this.curLocalTime=egret.getTimer(),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},e.prototype.loadServerTime=function(){var t=new egret.URLRequest;t.url=this.serverTimeURL,t.method=egret.URLRequestMethod.POST;var e="ajax=1";e+="&ran="+Math.random(),t.data=new egret.URLVariables(e);var i=new egret.URLLoader;i.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),i.load(t)},e.prototype.onLoadComplete=function(t){var e=t.target,i=JSON.parse(e.data);i.success?this.curServerTime=new Date(i.result).getTime():this.curServerTime=(new Date).getTime(),this.curLocalTime=egret.getTimer(),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},e.prototype.onLoadError=function(){this.curServerTime=(new Date).getTime(),this.curLocalTime=egret.getTimer(),console.log("onLoadError",this.curServerTime),this.dispatchEvent(new egret.Event(egret.IOErrorEvent.IO_ERROR))},e}(egret.EventDispatcher);__reflect(ServerTime.prototype,"ServerTime");var Utils=function(){function t(){}return Object.defineProperty(t,"isWeiXin",{get:function(){return navigator.userAgent.indexOf("MicroMessenger")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos",{get:function(){var t=navigator.userAgent;return!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIPhone",{get:function(){var t=navigator.userAgent;return t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIpad",{get:function(){var t=navigator.userAgent;return t.indexOf("iPad")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){var t=navigator.userAgent;return t.indexOf("Android")>-1||t.indexOf("Linux")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMobile",{get:function(){var t=navigator.userAgent;return!!t.match(/AppleWebKit.*Mobile.*/)||!!t.match(/AppleWebKit/)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isPortrait",{get:function(){if(!t.isMobile)return!0;if(t.isAndroid&&t.isWeiXin)return t.jqueryWindowWidth<t.jqueryWindowHeight?!0:!1;var e=window.orientation;return e?180==e||0==e?!0:90==e||-90==e?!1:void 0:t.jqueryWindowWidth<t.jqueryWindowHeight?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"jqueryWindowWidth",{get:function(){return $(window).width()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"jqueryWindowHeight",{get:function(){return $(window).height()},enumerable:!0,configurable:!0}),t.checkMobile=function(t){var e=/^0{0,1}(1[34578][0-9])\d{8}$/;return e.test(t)?!0:!1},t.checkEmail=function(t){var e=/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/;return e.test(t)},t.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?decodeURIComponent(i[2]):""},t.getRanList=function(t,e,i){for(var n=[],o=[],s=0;t>s;s++)o.push(s);for(var s=0;s<i.length;s++)n.push(i[s]);for(;n.length<e;){for(var r=Math.floor(Math.random()*o.length),a=!1,s=0;s<i.length;s++)if(o[r]==i[s]){a=!0;break}a||n.push(o[r]),o.splice(r,1)}o=[];for(var s=0;e>s;s++){var r=Math.floor(Math.random()*n.length);o.push(n[r]),n.splice(r,1)}return o},t.getEUISkinName=function(t){return"resource/page_skins/"+t+"Skin.exml"},t.getURL=function(t){egret.Capabilities.isMobile?location.href=t:window.open(t,"_blank")},t.getParamJson=function(t){return $.param(t)},t}();__reflect(Utils.prototype,"Utils");var UtilsTime=function(){function t(){}return t.mscToHourMintueSec=function(t){var e=t/1e3,i=86400,n=3600,o={day:Math.floor(e/i),hour:Math.floor(e%i/n),minute:Math.floor(e%i%n/60),sec:Math.floor(e%i%n%60)};return o},t.numToFixedLength=function(t,e){var i=t.toString(),n=e-i.length;if(n>0)for(var o=0;n>o;o++)i="0"+i;return i},t}();__reflect(UtilsTime.prototype,"UtilsTime");var WeiXinGuanZhu=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s.x=e,s.y=i,s.w=n,s.h=o,s}return __extends(e,t),e.prototype.show=function(){egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.pageBgResize,this),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.pageBgResize,this),this.pageBgResize(),$(".qr").removeClass("hide")},e.prototype.hide=function(){egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.pageBgResize,this),$(".qr").addClass("hide")},e.prototype.pageBgResize=function(){var t=this.x,e=this.y,i=this.w,n=this.h,o=640,s=1039,r=$(window).width(),a=$(window).height();if(console.log("weixin=w=h",r,a),Utils.isPortrait)var h=Math.max(r/o,a/s);else h=Math.min(r/o,a/s);var c=i*h,l=n*h,p=(r-o*h)/2+t*h,u=(a-s*h)/2+e*h;console.log("guanzhu:=",h,c,l,p,u),$("#qr").css("left",p+"px"),$("#qr").css("top",u+"px"),$("#qr").css("width",c+"px"),$("#qr").css("height",l+"px")},e}(egret.EventDispatcher);__reflect(WeiXinGuanZhu.prototype,"WeiXinGuanZhu");var Shake=function(t){function e(e){void 0===e&&(e=30);var i=t.call(this)||this;return i.shakeThreshold=30,i.last_update=0,i.cur_x=0,i.cur_y=0,i.cur_z=0,i.last_x=0,i.last_y=0,i.last_z=0,i.shakeThreshold=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.motion=new egret.Motion,this.motion.addEventListener(egret.Event.CHANGE,this.onMotion,this)},e.prototype.start=function(){this.last_update=egret.getTimer(),this.motion.start(),this.motion.removeEventListener(egret.Event.CHANGE,this.onMotion,this),this.motion.addEventListener(egret.Event.CHANGE,this.onMotion,this)},e.prototype.stop=function(){this.motion.stop(),this.motion.removeEventListener(egret.Event.CHANGE,this.onMotion,this)},e.prototype.onMotion=function(t){var e=t.accelerationIncludingGravity,i=egret.getTimer();if(i-this.last_update>100){i-this.last_update;this.cur_x=e.x,this.cur_y=e.y,this.cur_z=e.z;var n=this.cur_x-this.last_x,o=this.cur_y-this.last_y,s=this.cur_z-this.last_z,r=Math.sqrt(n*n+o*o+s*s);if(r>this.shakeThreshold){var a=new ShakeEvent(ShakeEvent.SHAKE);a.data={speed:r,acceleration:e},this.dispatchEvent(a)}this.last_x=this.cur_x,this.last_y=this.cur_y,this.last_z=this.cur_z,this.last_update=i}},e}(egret.EventDispatcher);__reflect(Shake.prototype,"Shake");var ShakeEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e}(egret.Event);ShakeEvent.SHAKE="shake",__reflect(ShakeEvent.prototype,"ShakeEvent");